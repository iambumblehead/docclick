// Filename: docclick.full.js  
// Timestamp: 2014/01/18 (last modified)  
// Author(s): Bumblehead (www.bumblehead.com)  

var incrnum=("object"==typeof module?module:{}).exports=function(n,t){return t=function(){return n++},t.toString=function(){return n++},t}(0);var eventhook=("object"==typeof module?module:{}).exports=function(){var n={fnArr:[],addFn:function(n){"function"==typeof n&&(n.oname="fn"+incrnum,this.fnArr.push(n))},rmFn:function(n){var r=n.oname;"function"==typeof n&&(this.fnArr=this.fnArr.filter(function(n){return n.oname!==r}))},fire:function(n,r,t,o){this.fnArr.map(function(e){e(n,r,t,o)})}};return{proto:n,getNew:function(){var r=Object.create(n);return r.fnArr=[],r}}}();var domev={getElemAt:function(t){var e=function(){};return"object"==typeof t&&t&&("target"in t?e=function(t){return t.target}:"srcElement"in t&&(e=function(t){return t.srcElement})),(domev.getElemAt=e)(t)},stopDefaultAt:function(t){var e=function(){};return"object"==typeof t&&t&&(e=t.preventDefault?function(t){return t.preventDefault()}:function(t){return t.returnValue=!1}),(domev.stopDefaultAt=e)(t)}};var lsn=function(n,t,e,o){function c(n){return/^(?:function|object|unknown)$/.test(typeof n)?!0:!1}return n=document.documentElement,t=function(){},e={add:function(e){return c(n.addEventListener)?e=function(n,t,e){n.addEventListener(t,e,!1)}:c(n.addatchEvent)&&(e=function(n,t,e){n.attachEvent("on"+t,function(n){e(n||window.event)})}),e||t}(),rm:function(e){return c(n.removeEventListener)?e=function(n,t,e){n.removeEventListener(t,e,!1)}:c(n.detachEvent)&&(e=function(n,t,e){n.detachEvent("on"+t,e)}),e||t}()},o=e.add,o.rm=e.rm,o}();var docclick=function(t){var n={count:0,fnFilterArr:[],addFilterFn:function(t){return"function"==typeof t&&this.fnFilterArr.push(t),this},isPassFilter:function(t,n){for(var e=this.fnFilterArr,r=e.length;r--;)if(!e[r](t,n))return!1;return!0},getParentLink:function(t,n){return t&&t.tagName&&(n=t.tagName.match(/^a/i)?t:this.getParentLink(t.parentNode)),n},onClick:function(t){return this.atClickHook.addFn(t),this},filter:function(t){return this.addFilterFn(t)},connect:function(){var t,n,e=this;lsn(e.elem,"click",function(r){t=domev.getElemAt(r),n=e.getParentLink(t),n&&e.isPassFilter(r,n)&&e.atClickHook.fire(r,n)})}};return t=function(t){var e=Object.create(n);return e.elem=t&&t.elem?t.elem:document.body,e.fnFilterArr=[],e.connect(),e.atClickHook=eventhook.getNew(),e},t.proto=n,t}();